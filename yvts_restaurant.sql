/* "RESTO" хоолны газрын database system 
    Нэр: Хулан
    Системийн нэр: "RESTO" хоолны газрын систем
    Системийн талаар товч: Хоолны газрын үйл ажиллагааг автоматжуулах систем.*/

CREATE TABLE Branch (
	branchNo VARCHAR(30) PRIMARY KEY,
	city VARCHAR(20),
	street VARCHAR(20),
	zipcode INT);
	
INSERT INTO Branch (BranchNo, city, street, zipcode )
VALUES ("BR01","Ulaanbaatar","Seoul",11000),
       ("BR02","Darkhan","Burhant",12184),
       ("BR03","Ulaanbaatar","Zaisan",11502),
       ("BR04","Ulaanbaatar","Selkh",12105);
       
CREATE TABLE Menu (
	FoodNo VARCHAR(30) PRIMARY KEY,
	FoodName VARCHAR(40),
	Ingredients VARCHAR(50),
	price INT,
	calories VARCHAR(30));
INSERT INTO Menu (foodNo, foodName, ingredients, price, calories)
VALUES ("FD01","Пизза","гурил, бяслаг, чинжүү, мөөг",18000, "2975cal"),
       ("FD02","Мөөгтэй Паста","паста гоймон, бяслаг, болцуу мөөг",12000, "1603cal"),
       ("FD03","Ногоотой шөл","тахианы мах, лууван, чинцай, ногоон вандуй",10900, "1346cal"),
       ("FD04","Бүрж шарсан шницель","үхрийн мах, төмс",18900, "2435cal"),
       ("FD05","Тахиан махан бүрмэл","тахианы мах, шинэ ногооны салат, шарсан төмс",15900, "l985cal"),
       ("FD06","Фалафел","Буурцаг, ногооны салат, сонгино, нарийн ногоо",15000, "468cal");
       
CREATE TABLE Customer (
	CustomerNo VARCHAR(20) PRIMARY KEY,
	Ovog VARCHAR(30),
	Ner VARCHAR(30),
	phonenumber INT,
	address VARCHAR(50)
	);
	
INSERT INTO Customer (CustomerNo, Ovog, Ner, phonenumber, address)
VALUES ("CT01","Жав","Баярмаа",99199115, "Зайсан, 5-р хороо"),
       ("CT02","Хонгор","Нанжид",88124595, "3-р хороо"),
       ("CT03","Мянгат","Мөнхбаяр",90012045, "8-р хороо"),
       ("CT04","Түмэн","Санчир",99885916, "1-р хороо"),
       ("CT05","Сархүү","Karina",95184874, "2-р хороо"),
       ("CT06","Балжинням","Баясгалан",85958561, "3-р хороо"),
       ("CT07","Даш","Хулан",99879315, "7-р хороо"),
       ("CT08","Цэдэв","Мандах",89455871, "2-р хороо"),
       ("CT09","Сүхээ","Өсөхбаяр",91584324, "17-р хороо"),
       ("CT10","Баатар","Гэрэл",98558451, "4-р хороо");

CREATE TABLE Staff (
	staffNo VARCHAR(20) PRIMARY KEY,
	Ovog VARCHAR(30),
	Ner VARCHAR(20),
	positions VARCHAR(50),
	sex VARCHAR(5),
	joineddate DATE,
	salary INT,
	phonenumber INT,
	branchno VARCHAR(20)
	);
INSERT INTO Staff (staffNo, Ovog, Ner, positions, sex, joineddate, salary, phonenumber, branchno)
VALUES ("SF01","Гангаа","Маргад","Менежэр","F","2020-08-29",1500000,99195884, "BR01"),
       ("SF02","Зүчи","Орших","Зөөгч","M","2020-09-13",750000,85155525, "BR01"),
       ("SF03","Тэмүүжин","Анирмаа","Зөөгч","F","2021-11-03",680000,99132884, "BR02"),
       ("SF04","Сант","Сүрэн","Ахлах тогооч","F","2020-08-29",1800000,88445511, "BR01"),
       ("SF05","Номт","Золоо","Угаагч","F","2020-08-29",1500000,89653265, "BR03"),
       ("SF06","Цэнд","Тэнгэр","Туслах тогооч","M","2021-02-16",1750000,91115225, "BR04"),
       ("SF07","Цэрэнхүү","Цэцэгсүрэн","Ариун цэвэр хариуцсан ажилтан","F","2021-11-01",680000,98521520, "BR02");
       
CREATE TABLE Order_ (
	OrderNo VARCHAR(20) PRIMARY KEY,
	staffNo VARCHAR(30),
	CustomerNo VARCHAR(30),
	FoodNo VARCHAR(50),
	quantity INT,
	total INT);
INSERT INTO Order_ (OrderNo, staffNo, CustomerNo, FoodNo, quantity, total)
VALUES ("ORD01","SF02","CT01","FD01",2,28900),
       ("ORD02","SF03","CT02","FD02",3,40900),
       ("ORD03","SF03","CT03","FD03",4,51800),
       ("ORD04","SF03","CT04","FD04",2,24000),
       ("ORD05","SF01","CT05","FD05",3,49800),
       ("ORD06","SF02","CT06","FD06",4,51800),
       ("ORD07","SF02","CT07","FD01",2,30900),
       ("ORD08","SF03","CT08","FD03",3,48000),
       ("ORD09","SF02","CT09","FD04",4,52700),
       ("ORD10","SF01","CT10","FD04",2,22900),
       ("ORD11","SF03","CT02","FD06",3,36000),
       ("ORD12","SF02","CT03","FD06",4,63000),
       ("ORD13","SF02","CT05","FD02",3,34900),
       ("ORD14","SF03","CT06","FD01",2,30000),
       ("ORD15","SF01","CT07","FD03",3,21800);
 
CREATE TABLE Viewing (
	CustomerNo VARCHAR(20),
	foodno VARCHAR(30),
	viewdate DATE,
	comments VARCHAR(50)
	);
INSERT INTO Viewing (CustomerNo, foodno, viewdate, comments)
VALUES ("CT03","FD03","2021-11-03", "Мах шүүрхий юм биш үү"),
       ("CT04","FD04","2021-11-04", "Маш амттай юм аа"),
       ("CT07","FD01","2021-11-05", "Дахин үйлчлүүлнэ"),
       ("CT09","FD04","2021-10-31", "Менежерээ дууд"),
       ("CT01","FD01","2021-11-08", "Ахлах тогоочтой уулзъя");
       
VII 
/* RA-ийн онолтой холбоотойгоор сонгосон систем дээр 10 асуулт зохионо уу! 
Улирлын төгсгөлд түүнийхээ хариултыг RA-ийн томъёогоор хариулна 
( RA-ийн үндсэн 5 үйлдэл, 5 өөр JOIN ашиглаж болохоор нийт 10 асуулт зохионо) 
 RA-ийн үндсэн 5 үйлдэл - Selection operation, project operation, union operation, 
			  set intersection, set difference, cartesion product
 5 өөр JOIN - 
 */
 
1. Үйлчлүүлэгч болон ажилтаны утасны дугаар адил 99-ээр эхэлсэн хүмүүсийн нэр, утасны дугаарыг харуул. (UNION)
2. Сэтгэгдэл үлдээсэн хүний идсэн хоолны дугаарыг харуул. (INTERSECTION)
3. Хоолны үнэ нь 20000 -аас бага байх хоолны нэрийг гарга. (SELECTION)
4. Цалин нь 750000-аас их байх эмэгтэй ажилчны овог нэрийг харуул. (PROJECTION)
5. Үйлчлүүлэгчийн сэтгэгдэл үлдээгээгүй хоолны дугаарыг харуул. (SET DIFFERENCE)
6. Хоолны цэс болон түүнд сэтгэгдэл үлдээсэн хүснэгтүүдийн мэдээллийг харуулна уу? (Cartesian product)
7. 11000 зипкодтой байх салбарт ажилладаг ажилчдын нэр, дугаарыг харуулна уу? (DIVISION)
8. Идсэн хоолондоо үнэлгээ өгсөн үйлчлүүлэгчдийн мэдээллийг харуулна уу. Үүнд LEFT OUTER JOIN ашиглана уу.
9. Дархан хотод байрлах хоолны газарт ажилладаг ажилтнуудын мэдээллийг гаргана уу.(SEMI JOIN)
10. Ажилтны дугаар, нэр, цалин, ажилладаг салбар, авсан захиалгын мэдээллүүдийг гаргана уу.(NATURAL JOIN)

VIII
/* SQL DML-ийн онолтой холбоотойгоор сонгосон систем дээр 10 асуулт зохионо уу! 
Улирлын төгсгөлд түүнийхээ хариултыг SQL Statement ашиглан хариулна 
( DML-ийн үндсэн 4 үйлдэл, 2 хүснэгт холбох, 3 хүснэгт холбох үйлдлүүд 
ашиглагдахуйц нийт 10 асуулт зохионо) 
DML-ийн үндсэн 4 үйлдэл - select, insert, update, delete  
2 хүснэгт холбох - 
3 хүснэгт холбох - */

1. 2021 оны 11 сард ажилд орсон ажилчдын мэдээллийг гарга. (SELECT)		  
2. BR02 салбар дээр бүртгэлтэй байдаг ажилчдын овог нэр, хэдэн төгрөгийн төлбөрийн тооцоо хийсэнг харуулна уу. (2 хүснэгт холбох)
3. SF05 кодтой ажилтны албан тушаалыг МЕНЕЖЕР болгож цалинг 2 хувиар нэмэгдүүлнэ үү. (UPDATE)
4. ORD10 дугаартай захиалгын авсан хоолны тоо, нийт төлбөрийн хэмжээг устгана уу. (DELETE)
5. FD07 дугаартай, орцонд нь хонины мах, төмс, гурил орсон, калори нь 1640 байх 9000 төгрөгийн үнэтэй Цуйван гэсэн хоолны шинэ цэсийг нэмнэ үү. (INSERT)
6. Хамгийн их калори агуулсан хоолны захиалга өгсөн үйлчлүүлэгчийн мэдээллийг харуул. (3 хүснэгт)
7. "Ахлах тогоочтой уулзъя" гэж санал хэлсэн үйлчлүүлэгчид үйлчилсэн ажилтны цалингийн хэмжээнээс 50000 төгрөгийг хас. 
8. Нийт хамгийн үнэтэй захиалга өгсөн үйлчлүүлэгчийн мэдээлэл болон тухайн хоолны мэдээллийг харуул.
9. Хоолны цэснээс хамгийн хямд, их, дундаж үнэтэй хоолнуудын мэдээллийг харуулна уу.
10. Орших-ийн ажиллаж буй салбарт харьяалагдах эмэгтэй ажилчдын овог, нэр, цалингийн мэдээллийг харуулна уу. Цалингийн хэмжээг бууруулж харуулна уу.

